<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Examinations - Department of Education</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<style>
body { font-family: 'Poppins', sans-serif; min-height: 100vh; display: flex; flex-direction: column; background-color: #f3f4f6; }
main { flex: 1; padding: 2rem; }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 0.75rem; text-align: left; border-bottom: 1px solid #e5e7eb; }
.category-header { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 1rem; color: #6b21a8; }
</style>
</head>
<body>

<!-- Navigation -->
<nav class="bg-purple-900 text-white shadow-lg p-4 flex justify-between items-center">
  <h1 class="text-2xl font-bold">Department of Education</h1>
  <div class="flex gap-4">
    <a href="dashboard.html" class="bg-white text-purple-900 px-4 py-2 rounded-lg font-medium hover:bg-purple-100 transition">
      Home
    </a>
    <button id="logoutBtn" class="bg-white text-purple-900 px-4 py-2 rounded-lg font-medium hover:bg-purple-100 transition">
      Logout
    </button>
  </div>
</nav>

<main class="max-w-7xl mx-auto mt-8">
  <h2 class="text-3xl font-bold text-purple-900 mb-8 text-center" data-aos="fade-down">
    Upper Secondary Examinations
  </h2>

  <!-- Search Form -->
  <div class="mb-8 bg-white p-6 rounded-xl shadow-md" data-aos="fade-up">
    <h3 class="text-xl font-bold text-purple-900 mb-4">Search Subjects or Standards</h3>
    <form id="searchForm" class="flex flex-col md:flex-row gap-4">
      <input type="text" id="subjectName" placeholder="Search by subject name or code" 
        class="flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:outline-none" />
      <button type="submit" class="bg-purple-900 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
        Search
      </button>
    </form>
  </div>

  <!-- Subjects Cards (Service Cards) -->
  <div id="subjectsList" data-aos="fade-up"></div>

  <!-- Examination Timetable -->
  <div class="bg-white p-6 rounded-xl shadow-md mb-12" data-aos="fade-up">
    <h3 class="text-xl font-bold text-purple-900 mb-4">Examination Timetable 2025 (Externals Only)</h3>
    <div id="timetable"></div>
    <p class="text-gray-600 mt-4 text-sm italic">Note: All examination dates are for the year 2025.</p>
  </div>
</main>

<!-- Footer -->
<footer class="bg-purple-900 text-white text-center py-4 mt-auto">
  <p>&copy; 2025 Department of Education. All rights reserved.</p>
</footer>

<script>
AOS.init({ duration: 800, easing: 'ease-in-out', once: true });

// Subjects organized by category
const subjectCategories = {
  "Mathematics": ["Algebra", "Geometry", "Calculus", "General Maths", "Applied Maths", "Statistics"],
  "Science": ["Physics", "Chemistry", "Biology", "Environmental Science", "Computer Science"],
  "English & Languages": ["English", "Literature", "Latin", "French", "Spanish"],
  "Social Sciences": ["History", "Geography", "Economics", "Civics", "Psychology", "Philosophy"],
  "Arts & Performance": ["Art", "Music", "Drama", "Media Studies"],
  "Physical Education & Health": ["Physical Education", "Health"],
  "Technology & Business": ["Design & Technology", "Business Studies", "Accounting", "Entrepreneurship"]
};

// Flatten subjects for timetable
const subjects = Object.values(subjectCategories).flat();

// Map categories to number for code (x in 3xxyz)
const categoryMap = {
  "Mathematics": 1,
  "Science": 2,
  "English & Languages": 3,
  "Social Sciences": 4,
  "Arts & Performance": 5,
  "Physical Education & Health": 6,
  "Technology & Business": 7
};

// Generate standards array with proper 3xxyz codes
const standards = [];
Object.entries(subjectCategories).forEach(([cat, subs]) => {
  subs.forEach((sub, i) => {
    const gradeCycle = [10,11,12];
    gradeCycle.forEach((grade, gIndex) => {
      const prefix = grade === 10 ? "3" : grade === 11 ? "6" : "9";
      const x = categoryMap[cat];
      const y = gIndex + 1; 
      const z = String(i+1).padStart(1,"0");
      standards.push({
        subject: sub,
        code: `${prefix}${x}${x}${y}${z}`,
        grade: grade
      });
    });
  });
});

// Render subjects cards by category with Learn More button linking to template page
const subjectsList = document.getElementById('subjectsList');
function renderSubjects(categories) {
  subjectsList.innerHTML = Object.entries(categories).map(([cat, subs]) => `
    <h3 class="category-header">${cat}</h3>
    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-12">
      ${subs.map(sub => `
        <div class="bg-white shadow-lg rounded-xl p-6 hover:shadow-2xl transition">
          <h4 class="text-lg font-bold text-purple-900">${sub}</h4>
          <p class="text-gray-600 mt-2">Search for standards, exemplars, and assessment schedules.</p>
         <a href="grades.html?subject=${encodeURIComponent(sub)}" class="mt-4 inline-block px-4 py-2 bg-purple-900 text-white rounded-lg hover:bg-purple-700 transition">Learn More</a>
          </a>
        </div>
      `).join('')}
    </div>
  `).join('');
}
renderSubjects(subjectCategories);

// Timetable with mid-Oct to late-Nov dates
const timetableDiv = document.getElementById('timetable');
const startDate = new Date("2025-10-15");
function addDays(date, days) {
  const result = new Date(date);
  result.setDate(result.getDate() + days);
  return result;
}
function formatDateLong(date) {
  const days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
  const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
  const dayName = days[date.getDay()];
  const dayNum = date.getDate();
  const daySuffix = (dayNum) => {
    if(dayNum >= 11 && dayNum <= 13) return 'th';
    switch(dayNum % 10) {
      case 1: return 'st';
      case 2: return 'nd';
      case 3: return 'rd';
      default: return 'th';
    }
  };
  return `${dayName} ${dayNum}${daySuffix(dayNum)} ${months[date.getMonth()]}`;
}
standards.forEach((s, i) => { s.date = formatDateLong(addDays(startDate, i * 2)); });

// Render timetable
function renderTimetable() {
  const grades = [10,11,12];
  timetableDiv.innerHTML = grades.map(grade => {
    const gradeExams = standards.filter(s => s.grade === grade);
    return `
      <h4 class="text-purple-900 font-bold mt-4 mb-2">Grade ${grade}</h4>
      <table>
        <thead>
          <tr>
            <th>Subject</th>
            <th>Code</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          ${gradeExams.map(s => `
            <tr>
              <td>${s.subject}</td>
              <td>${s.code}</td>
              <td>${s.date}</td>
            </tr>
          `).join('')}
        </tbody>
      </table>
    `;
  }).join('');
}
renderTimetable();

// Search functionality
document.getElementById("searchForm").addEventListener("submit", e => {
  e.preventDefault();
  const query = document.getElementById("subjectName").value.toLowerCase();
  const filteredCategories = {};
  Object.entries(subjectCategories).forEach(([cat, subs]) => {
    const filteredSubs = subs.filter(sub => sub.toLowerCase().includes(query) || standards.some(s => s.subject.toLowerCase() === sub.toLowerCase() && s.code.includes(query)));
    if(filteredSubs.length) filteredCategories[cat] = filteredSubs;
  });
  renderSubjects(filteredCategories);
});

// Logout button (redirect silently)
document.getElementById("logoutBtn").addEventListener("click", () => {
  window.location.href = "login.html";
});
</script>
</body>
</html>
